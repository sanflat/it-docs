# SQL

## SQLとは
```markdown
SQLとは、1970年代に開発されたデータベース言語のことです。
SQLは、あくまでデータベースを操作する言語なので、プログラミング言語ではありません。
データベースを使っているWebサービスはほとんどないと言っても過言ではなく、WEBアプリケーション開発などでは必要なスキルになります。
```

## SQLの特徴
```markdown
SQLで出来ることは大きくわけると3つあります。
```

1. データ操作
2. データ定義
3. データ制御

```markdown
1つずつ説明します。

データを操作する言語(データ操作言語)のことを、DML(Data Manipulation Language)といいます。
データベースにデータを登録したり、特定の条件にあったものを抽出したり、一度登録したデータを更新・削除したりといった操作を行えます。
具体的には、以下の4つの構文のことです。
```

DMLの構文

| 命令文 | 内容 |
| :-- | :-- |
| SELECT | データを検索する |
| INSERT | データを挿入する |
| UPDATE | データを更新する |
| DELETE | データを削除する |

```markdown
データを定義する言語(データ定義言語)のことを、DDL(Data Definition Language)といいます。
データベースに含まれる中身(テーブルやインデックスなどの構造、オブジェクト同士の関係等)を定義し、データの整合性を保つことができます。
具体的には、以下の5つの構文のことです。
```

DDLの構文

| 命令文 | 内容 |
| :-- | :-- |
| CREATE | 新しいデータベースやテーブルなどのオブジェクトを定義 |
| JOIN | テーブル同士を結合する |
| DROP | 定義したオブジェクトを削除する |
| ALTER | 定義したオブジェクトの内容を変更する |
| TRUNCATE | すべてのデータを削除する |

```markdown
データを制御する言語(データ制御言語)のことを、DCL(Data Control Language)といいます。
ユーザー権限やトランザクションなど、データへのアクセスを制御することができ、権限を与えたり、権限を剥奪したりすることができます。
具体的には、以下の5つの構文のことです。
```

DCLの構文

| 命令文 | 内容 |
| :-- | :-- |
| GRANT | ユーザー権限を付与する |
| REVOKE | ユーザー権限を削除する |
| BEGIN | トランザクションを開始する |
| COMMIT | トランザクションを確定する |
| ROLLBACK | トランザクションを巻き戻す |

## リレーショナルデータベースマネジメントシステムとは？
```markdown
データベースを管理するシステムには色々種類があります。
有名どころは、Oracle Database、MySQL、Postgresqlなどです。
これらのデータベースを管理するシステムのことを、リレーショナルデータベースマネジメントシステムと言います。
省略してRDBMSともいいます。

リレーショナルデータベースマネジメントシステムとは、言葉の通りリレーショナルデータベースを管理するためのソフトウェアを指します。
```

## リレーショナルデータベースとは？
```markdown
リレーショナルデータベース(Relationak Database)は、データベースの一種です。
省略してRDBとも呼ばれます。

データベースとは収集したデータを、検索や追加などが簡単にできるように整理したものです。
データベースには、リレーショナルデータベースの他に、階層型データべース、ネットワーク型データベースなどがありますが、リレーショナルデータベースは一番スタンダードなタイプのデータベースです。

リレーショナルデータベースの特徴は、データを「表形式」で管理することです。
関係の深い属性を列で並ばせ、そこに行としてデータを登録していくイメージです。
列や行を指定したり、表と表をつなぎ合わせたりしながらデータの検索ができます。
このリレーショナルデータベースを管理するためのRDBMSは、SQLを使って、データの登録・検索・更新・削除をすることができます。
```

## テーブル
```markdown
RDBMSは複数のテーブルで構成されています。
テーブルとは「ある一定のまとまりのある、表形式のデータ群」です。

イメージするために、Excelに例えてみます。
データベースそのものは、Excelのファイル。
テーブルは、Excelの1つ1つのワークシートのことです。

ワークシートには、それぞれ列と行があると思います。
テーブルでは、列のデータのことを「カラム」、行のデータのことを「レコード」といいます。
```

## SELECT文
```markdown
SELECT文を発行することで、データベースから欲しい情報を取り出すことがでいます。
```

```jsx highlight=4,6-8
SELECT カラム名 
FROM テーブル名;
```

## WHERE
```markdown
特定の条件でデータベースから欲しい情報を取り出すには、WHEREを使います。

WHEREは、SELECT文にWHEREをつけることで、テーブルの中の特定の行を取得できます。
カラム指定はSELECTでレコード指定はWHEREのようにイメージしておくと良いでしょう。

WHEREを追加した構文は以下のようになります。
FROMに後に着け、条件式にはイコールや大なり、小なり、否定などを使った式が入ります。
```

```jsx highlight=4,6-8
SELECT カラム名 
FROM テーブル名
WHERE 条件式;
```

## ORDER BY
```markdown
抽出対象のデータを並び替えるには、ORDER BYを使います。

ORDER BYは、SELECT文にORDER BYをつけることで、取得するデータを昇順、降順に並び変えることができます。

ORDER BYを追加した構文は以下のようになります。
FROMに後に着け、並び変え条件には、カラム名やカラムの番号 & ASC(昇順) or DESC(降順)が入ります。
```

```jsx highlight=4,6-8
SELECT カラム名 
FROM テーブル名
ORDER BY 並び替え条件;
```

```markdown
複数のカラムを並び替え条件に指定することも可能です。
複数指定は、並び替え条件をカンマで区切ることで指定できます。

その場合、優先的に並び変えされるのは先に指定したカラムになります。
なお、前項で紹介したWHEREと組み合わせて使用する場合、ORDER BYはWHEREの後に記述します。
最後に書くと覚えておくと良いでしょう。
```

```jsx highlight=4,6-8
SELECT カラム名 
FROM テーブル名
WHERE 条件式
ORDER BY 並び替え条件1, 並び変え条件2, 並び変え条件3;
```
